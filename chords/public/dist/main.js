var b=Object.defineProperty;var o=(e,s)=>b(e,"name",{value:s,configurable:!0});import{Signal as u}from"@char/aftercare";import{jsx as r,jsxs as i}from"@char/aftercare/jsx-runtime";var h=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],f=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],g=o((e,s)=>{let t=e.includes("b")?f:h,n=t.indexOf(e);return n===-1?e:t[((n+s)%12+12)%12]},"transposeRoot"),x=o((e,s)=>{if(s===0)return e;let t=e.match(/^([A-G][b#]?)(.*)/);return t?g(t[1],s)+t[2]:e},"transposeChord"),T=o(e=>/^[A-G][b#]?/.test(e),"isChord"),a=new u(""),d=new u(0),A=o(e=>{let s=e.split(/(\s+)/),t=d.get();return s.map(n=>T(n)?i("span",{class:"chord-wrap",children:[r("span",{class:"chord",children:n.split("/").map(m=>x(m,t)).join("/")}),n]}):document.createTextNode(n))},"renderChordLine"),l=r("div",{class:"editor-backdrop","aria-hidden":"true"}),p=o(()=>{let e=a.get().split(`
`),s=[];for(let t=0;t<e.length;t++)t>0&&s.push(document.createTextNode(`
`)),t%2===0?s.push(...A(e[t])):s.push(document.createTextNode(e[t]));s.push(document.createTextNode("\u200B")),l.replaceChildren(...s)},"updateBackdrop");a.subscribe(p);d.subscribe(p);var c=r("textarea",{id:"input",spellcheck:!1,autocomplete:"off",autocorrect:!1,value:a});c.addEventListener("scroll",()=>{l.scrollTop=c.scrollTop});var C=r("input",{id:"semitones",type:"number",min:"-11",max:"11",value:d.str(Number),placeholder:"0"});document.querySelector("main").append(i("section",{children:["transpose by ",C," semitones:"]}),i("div",{class:"editor",children:[l,c]}));p();
//# sourceMappingURL=main.js.map
